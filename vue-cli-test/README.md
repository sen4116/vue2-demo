# vue-cliç¬”è®°

## 1.åˆ†æè„šæ‰‹æ¶çš„ç›®å½•ç»“æ„

![image-20220729181028300](https://picgo-image-sen.oss-cn-zhangjiakou.aliyuncs.com/Typora/202207291810733.png)

    (1).gitignore: é…ç½®gitå¿½ç•¥æ–‡ä»¶ä¸é…gitç®¡ç†
    (2)babel.config.jsï¼šes6è½¬es5è½¬æ¢æ–‡ä»¶(ä¸éœ€è¦è‡ªå·±åŠ¨æ‰‹æ”¹é…ç½®)
    (3)jsconfig.jsonï¼šç›®å½•ä¸­å­˜åœ¨jsconfig.jsonæ–‡ä»¶è¡¨ç¤ºæ”¹ç›®å½•æ˜¯JavaScripté¡¹ç›®çš„æ ¹ç›®å½•ã€‚jsconfig.jsonçš„é…ç½®å¯ä»¥å¯¹ä½ çš„æ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹çš„æ‰€æœ‰jsä»£ç åšå‡ºä¸ªæ€§åŒ–æ”¯æŒã€‚è¿™æ˜¯VS code è‡ªå·±ç”Ÿæˆçš„ã€‚
    (4)package-lock.json: é¡¹ç›®ç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶ï¼Œç¡®å®šæ’ä»¶ç‰ˆæœ¬
    (5)package.jsonï¼šé¡¹ç›®è¯´æ˜ä¹¦ã€‚é‡Œé¢æœ‰ node æŒ‡ä»¤è¯´æ˜ (scripts serveï¼šè¿è¡Œï¼Œbuildï¼šé¡¹ç›®æ‰“åŒ…çº¿ä¸Šï¼Œlintï¼šè¯­æ³•æ£€æŸ¥)ã€æ’ä»¶ä¾èµ–(dependencies)
    (6)README.md: é¡¹ç›®ä»‹ç»
    (7)vue.config.js: å¯ä»¥é…ç½®vueçš„è„šæ‰‹æ¶
    (8)srcæ–‡ä»¶å¤¹: ä¸šåŠ¡ä»£ç ç¼–è¾‘åŒº
    (9)srcæ–‡ä»¶å¤¹ä¹‹assetsæ–‡ä»¶ï¼šå­˜æ”¾é™æ€èµ„æº
    (10)srcæ–‡ä»¶å¤¹ä¹‹componentsæ–‡ä»¶: å­˜æ”¾ç»„ä»¶
    (11)srcæ–‡ä»¶å¤¹ä¹‹App.vue: æ‰€æœ‰ç»„ä»¶çš„çˆ¶ç»„ä»¶
    (12)srcæ–‡ä»¶å¤¹ä¹‹main.jsï¼šé¡¹ç›®å…¥å£æ–‡ä»¶
    (13)publicæ–‡ä»¶å¤¹: å…¬ç”¨æ–‡ä»¶å¤¹
    (14)node_modulesæ–‡ä»¶å¤¹: æ’ä»¶åŒ…



## 2.å…³äºä¸åŒç‰ˆæœ¬çš„Vue

    (1)vue.jsä¸vue.runtime.xxx.jsçš„åŒºåˆ«
        (a).vue.js æ˜¯å®Œæ•´çš„Vueã€‚åŒ…å«äº†æ ¸å¿ƒåŠŸèƒ½(ç”Ÿå‘½å‘¨æœŸã€æŒ‡ä»¤) + æ¨¡ç‰ˆè§£æå™¨
        (b).vue.runtime.xxx.jsæ˜¯è¿è¡Œç‰ˆçš„Vueï¼ŒåªåŒ…å«ï¼šæ ¸å¿ƒåŠŸèƒ½ï¼šæ²¡æœ‰æ¨¡æ¿è§£æå™¨
    (2)vue.runtime.xxx.jså¦‚ä½•æ¸²æŸ“æ¨¡æ¿
        å› ä¸ºæ²¡æœ‰æ¨¡æ¿è§£æå™¨ï¼Œæ‰€ä»¥å°±ä¸èƒ½ä½¿ç”¨templateé…ç½®é¡¹ï¼Œéœ€è¦ä½¿ç”¨renderå‡½æ•°æ¥æ”¶åˆ°createElementå‡½æ•°å»æŒ‡å®šå…·ä½“å†…å®¹



## 3.vue.config.jsé…ç½®æ–‡ä»¶

   >  ä½¿ç”¨å‘½ä»¤ï¼švue inspect > output.js åªèƒ½æŸ¥çœ‹Vueè„šæ‰‹æ¶çš„é»˜è®¤é…ç½®é¡¹
   >  ä½¿ç”¨vue.config.jså¯ä»¥å¯¹è„šæ‰‹æ¶è¿›è¡Œä¸ªæ€§åŒ–å®šåˆ¶ï¼Œè¯¦æƒ…è§ https://cli.vuejs.org/zh/



## 4.refå±æ€§

    1.è¢«ç”¨æ¥ç»™å…ƒç´ æˆ–å­ç»„ä»¶æ³¨å†Œå¼•ç”¨ä¿¡æ¯(idçš„æ›¿èº«)
    2.åº”ç”¨åœ¨htmlæ ‡ç­¾ä¸Šè·å–çš„æ˜¯çœŸå®DOMå…ƒç´ ï¼Œåº”ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šæ˜¯ç»„ä»¶å®ä¾‹å¯¹è±¡(vc)
    3.ä½¿ç”¨æ–¹å¼ï¼š xxxæ˜¯è‡ªå®šä¹‰ç»‘å®šçš„åç§°
        æ‰“æ ‡è¯†ï¼š<h1 ref="xxx"></h1> æˆ– <school ref="xxx"></school>
        è·å–ï¼šthis.$refs.xxx


## 5.é…ç½®é¡¹props

    åŠŸèƒ½ï¼šè®©ç»„ä»¶æ¥æ”¶å¤–éƒ¨ä¼ è¿‡æ¥çš„æ•°æ®
    1.ä¼ å…¥æ•°æ®ï¼š
        <Demo name="xxx">
    2.æ¥å—æ•°æ®ï¼š
        ç¬¬ä¸€ç§æ–¹å¼ï¼ˆåªæ¥æ”¶ï¼‰ï¼š
        props:['name]
        ç¬¬äºŒç§æ–¹å¼(æ¥æ”¶å¹¶é™åˆ¶ç±»å‹)ï¼š
        props:{
            name:String
        }
        ç¬¬ä¸‰ç§æ–¹å¼(é™åˆ¶ç±»å‹ã€é™åˆ¶å¿…è¦æ€§ã€æŒ‡å®šé»˜è®¤å€¼)
        props:{
            name:{
                type: String,//ç±»å‹
                required: true,//å¿…è¦æ€§
                default: 'é™ˆå¹³å®‰',//é»˜è®¤å€¼
            }
        }
    å¤‡æ³¨ï¼šâœ¨âœ¨âœ¨
    propsæ˜¯åªè¯»çš„ï¼ŒVueåº•å±‚ä¼šç›‘æµ‹ä½ å¯¹propsçš„ä¿®æ”¹ï¼Œå¦‚æœè¿›è¡Œäº†ä¿®æ”¹ï¼Œå°±ä¼šå‘å‡ºè­¦å‘Šï¼Œ
    è‹¥ä¸šåŠ¡éœ€æ±‚ç¡®å®šä¿®æ”¹ï¼Œé‚£ä¹ˆè¯·å¤åˆ¶propsçš„æ•°æ®åˆ°dataä¸­ä¸€ä»½ï¼Œç„¶åå»ä¿®æ”¹å­ç»„ä»¶dataçš„æ•°æ®
    
    props æ¥æ”¶æ•°æ®è¢«Vueæµ…ç›‘å¬ï¼Œåªç›‘å¬æ¥æ”¶æ•°æ®å­˜å‚¨çš„å¤–å±‚æ•°æ®å˜åŒ–ï¼Œæ²¡æœ‰ç›‘å¬æ•°æ®åº•å±‚çš„å˜åŒ–ã€‚
    å¦‚ï¼šæ¥æ”¶æ˜¯ä¸€ä¸ªå¯¹è±¡objï¼Œè€Œæ­¤æ—¶ä¿®æ”¹obj.a,è¿™ç§æƒ…å†µVueæ˜¯ç›‘å¬ä¸äº†çš„ï¼Œä½†æ˜¯ä¿®æ”¹obj = "xxx",è¿™æ ·æ“ä½œä¼šè¢«Vueæ‰€ç›‘å¬
    
    ä¹Ÿå¯ä»¥æ¥å—çˆ¶ç»„ä»¶ä¼ å…¥çš„å‡½æ•°æ–¹æ³•
    çˆ¶ç»„ä»¶ï¼š
    <Demo :propsName="methodsName"> methods:{methodsName(e){}}
    å­ç»„ä»¶ï¼š
    <childDemo >  props:['propsName'] æ­¤æ—¶çˆ¶ç»„ä»¶äº‹ä»¶åœ¨vcå®ä¾‹ä¸Š


## 6.mixin(æ··å…¥)

    åŠŸèƒ½ï¼šå¯ä»¥æŠŠå¤šä¸ªç»„ä»¶å…¬ç”¨çš„é…ç½®æå–æˆä¸€ä¸ªæ··åˆå¯¹è±¡
    ä½¿ç”¨æ–¹æ³•ï¼š
        ç¬¬ä¸€æ­¥ï¼šå®šä¹‰æ··åˆ åˆ›å»ºjsæ–‡ä»¶ï¼Œæš´éœ²æ•°æ®
        export default {
            data(){
                return{
    
                }
            },
            methods:{
    
            },
            mounted(){
    
            }
        }
        ç¬¬äºŒæ­¥ï¼šä½¿ç”¨æ··å…¥
            å…¨å±€æ³¨å†Œï¼šVue.mixin(valueName)
            å±€éƒ¨æ³¨å†Œï¼šmixins:[valueName]
        
    å¤‡æ³¨ï¼šâœ¨âœ¨âœ¨
    è‹¥è¢«æ¥æ”¶çš„ç»„ä»¶ä¸­dataå±æ€§åå’Œmixin.jsæ··åˆçš„dataå±æ€§åä¸€è‡´ï¼Œç»„ä»¶æ•°æ®è¦†ç›–ï¼Œæ··åˆæ•°æ® ===>æ¥æ”¶ç»„ä»¶ä¼˜å…ˆçº§é«˜
    mixin.jsçš„ç”Ÿå‘½å‘¨æœŸå’Œæ¥æ”¶æ··åˆçš„ç»„ä»¶æ‰§è¡Œé¡ºåºä¼˜å…ˆçº§===>æ··åˆçš„ä¼˜å…ˆçº§æ›´é«˜



## 7.æ’ä»¶

    åŠŸèƒ½ï¼šç”¨äºå¢å¼ºVue
    æœ¬è´¨ï¼šåŒ…å«installæ–¹æ³•çš„ä¸€ä¸ªå¯¹è±¡ï¼Œinstallçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Vueæ„é€ å‡½æ•°ï¼Œç¬¬äºŒä¸ªä»¥åçš„å‚æ•°æ˜¯æ’ä»¶ä½¿ç”¨è€…ä¼ é€’çš„æ•°æ®
    å®šä¹‰æ’ä»¶ï¼š
        å¯¹è±¡.install = function(){
            // 1. æ·»åŠ å…¨å±€è¿‡æ»¤å™¨
            Vue.filter()
    
            // 2.æ·»åŠ å…¨å±€æŒ‡ä»¤
            Vue.directive()
    
            // 3.é…ç½®å…¨å±€æ··å…¥
            Vue.mixin()
    
            // 4.æ·»åŠ å®ä¾‹æ–¹æ³•
            Vue.prototype.$myMethod = function(){}
            Vue.prototype.$myProperty = xxx
        }
    ä½¿ç”¨æ’ä»¶ï¼šVue.use()



## 8.ç»„ä»¶æ ·å¼ä¹¦å†™ scoped

    ä½œç”¨ï¼šè®©æ ·å¼åœ¨å±€éƒ¨ç”Ÿæ•ˆï¼Œé˜²æ­¢æ–‡ä»¶ä¹‹é—´çš„æ ·å¼åå†²çª
    å†™æ³•ï¼š<style scoped>



## 9.ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶

1.ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äºï¼š<font color=red>å­ç»„ä»¶ ===> çˆ¶ç»„ä»¶</font>

2.ä½¿ç”¨åœºæ™¯ï¼šAæ˜¯çˆ¶ç»„ä»¶ï¼ŒBæ˜¯å­ç»„ä»¶ï¼ŒBæƒ³ç»™Aä¼ æ•°æ®ï¼Œé‚£ä¹ˆå°±è¦åœ¨Aä¸­ç»™Bç»‘å®šè‡ªå®šä¹‰äº‹ä»¶(<font color=red>äº‹ä»¶å›è°ƒåœ¨Aä¸­</font>)

3.ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼š

â€‹	1.ç¬¬ä¸€ç§æ–¹å¼ï¼šåœ¨çˆ¶ç»„ä»¶ä¸­ï¼š`<Demo @äº‹ä»¶å="å›è°ƒå‡½æ•°" />`	æˆ–è€…	`<Demo v-on:äº‹ä»¶å="callback">` 

â€‹	2.ç¬¬äºŒç§æ–¹å¼ï¼šåœ¨çˆ¶ç»„ä»¶ä¸­

```
<Demo ref="demo" />
......
methods(){
	this.$refs.demo.$on('äº‹ä»¶å',callback)
	//è‹¥æƒ³è®©è‡ªå®šä¹‰äº‹ä»¶åªèƒ½è§¦å‘ä¸€æ¬¡ï¼Œå¯ä»¥ä½¿ç”¨ $once æˆ–è€…æ˜¯ åœ¨æ ‡ç­¾é‡Œä½¿ç”¨ä¿®é¥°ç¬¦ .once
	//this.$refs.demo.$once('eventName',callback)
}
```

4.è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼š `this.$emit('eventName',callback)` <font color=blue>ï¼ˆåœ¨å­ç»„ä»¶ä¸­ä½¿ç”¨ï¼‰</font>

5.è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶ï¼š`this.$off()`  	è‹¥ `this.$off()` ä¸­æ²¡æœ‰ä¼ eventName,é‚£ä¹ˆåˆ™ä¼šæ¸…é™¤å­ç»„ä»¶æ ‡ç­¾ä¸­æ‰€æœ‰ç»‘å®šçš„è‡ªå®šä¹‰äº‹ä»¶

```
this.$off() //æ¸…é™¤æ‰€æœ‰
this.$off('eventName') //æ¸…é™¤æŒ‡å®šè‡ªå®šä¹‰äº‹ä»¶
this.$off(['eventName'....]) //æ¸…é™¤å¤šä¸ªè‡ªå®šä¹‰äº‹ä»¶
```

6.ç»„ä»¶ä¸Šä¹Ÿå¯ä»¥ç»‘å®šåŸç”ŸDOMäº‹ä»¶ï¼Œéœ€è¦åœ¨å­ç»„ä»¶æ ‡ç­¾ä¸­ä½¿ç”¨`.native`ä¿®é¥°ç¬¦

```
<Demo @click.native="callback" />
```

ğŸ‡ğŸ‡ğŸ‡

7.æ³¨æ„ï¼šé€šè¿‡`this.$refs.xxx.$on('eventName',callback)`ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶æ—¶ï¼Œå›è°ƒå‡½æ•°<font color=red>è¦ä¹ˆé…ç½®åœ¨methodsä¸­ï¼Œè¦ä¹ˆå°±æ˜¯å›è°ƒå‡½æ•°å°±ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œ</font>å¦åˆ™this**`æŒ‡å‘ä¼šå‡ºç°é—®é¢˜`**



## 10.å…¨å±€äº‹ä»¶æ€»çº¿

1.ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äº<font color="red">ä»»æ„ç»„ä»¶é—´é€šä¿¡</font>

2.å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿ï¼š

```
new Vue({
	...
	beforeCreate(){
		Vue.peototype.$bus = this //å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿ï¼Œ$buså°±æ˜¯å½“å‰åº”ç”¨çš„vm 
	}
	...
})
```

3.ä½¿ç”¨äº‹ä»¶æ€»çº¿

â€‹	1.æ¥æ”¶æ•°æ®ï¼šAç»„ä»¶æƒ³è¦æ¥æ”¶æ•°æ®ï¼Œåˆ™åœ¨Aç»„ä»¶ä¸­ç»™$bus ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼Œäº‹ä»¶çš„<font color="red">å›è°ƒç•™åœ¨Aç»„ä»¶è‡ªèº«</font>

```
methods(){
	demo(data){
		...
	}
}
mounted: {
	this.$bus.$on('eventName', demo)
}
```

â€‹	2.æä¾›æ•°æ®ï¼ˆè§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼‰ï¼š`this.$bus.$emit('eventName',æºå¸¦æ•°æ®)`

4.æœ€å¥½åœ¨beforeDestroyé’©å­ä¸­ï¼Œç”¨$offå»è§£ç»‘<font color="red">å½“å‰ç»„ä»¶æ‰€ç”¨åˆ°çš„äº‹ä»¶</font>



## 11.æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒï¼ˆpubsubï¼‰

1.ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äº<font color="red">ä»»æ„ç»„ä»¶é—´é€šä¿¡</font>

2.ä½¿ç”¨æ­¥éª¤ï¼š

â€‹	1.å®‰è£…pubsubï¼š`npm i pubsub-js`

â€‹	2.å¼•å…¥	`import pubsub from 'pubsub-js'`

â€‹	3.æ¥æ”¶æ•°æ®ï¼šAç»„ä»¶æƒ³æ¥æ”¶æ•°æ®ï¼Œåˆ™åœ¨Aç»„ä»¶ä¸­è®¢é˜…æ¶ˆæ¯ï¼Œè®¢é˜…çš„<font color="red">å›è°ƒç•™åœ¨Aç»„ä»¶è‡ªèº«</font>

â€‹	

```
methodsï¼š{
	demo(data){}
}
...
mounted(){
	this.pid = pubsub.subscribe('eventName',this.demo)//è®¢é˜…æ¶ˆæ¯
},
beforeDestroy(){
	pubsub.unsubsrcibe(this.pid) //å–æ¶ˆè®¢é˜…
}
```

4.æä¾›æ•°æ®ï¼š`pubsub.publish('eventName',æ•°æ®)`

5.æœ€å¥½åœ¨beforeDestroyé’©å­ä¸­ï¼Œç”¨`pubsub.unsubsrcibe(this.pid)` å»<font color="red">å–æ¶ˆè®¢é˜…</font>



## 12.nextTick

1.è¯­æ³•ï¼š`this.$nextTick(callback)`

2.ä½œç”¨ï¼šåœ¨ä¸‹ä¸€æ¬¡DOMæ›´æ–°ç»“æŸåæ‰§è¡Œå…¶æŒ‡å®šçš„å›è°ƒ

3.ä½¿ç”¨åœºæ™¯ï¼šå½“æ”¹å˜æ•°æ®åï¼Œè¦åŸºäºæ›´æ–°åçš„æ–°DOMç»è¡ŒæŸä¸€äº›æ“ä½œï¼Œè¦åœ¨nextTickæ‰€æŒ‡å®šçš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œ  ===> å¯ä»¥ç†è§£ä¸ºï¼šæ‰§è¡Œæ–¹æ³•ä¸­ï¼Œ<font color="red">æœ‰æ“ä½œæ›´æ–°DOMæ•°æ®å’Œæ“ä½œåŸç”ŸDOMäº‹ä»¶çš„åŒæ—¶ï¼Œ</font>Vueä¼šå…ˆå°†æ–¹æ³•æ‰§è¡Œå®Œï¼Œä¸ä¼šç«‹å³å»æ›´æ–°DOMï¼Œä»è€Œå¯¼è‡´æ“ä½œåŸç”ŸDOMäº‹ä»¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œæ‰€ä»¥æ­¤æ—¶å°±åº”è¯¥ä½¿ç”¨nextTickå…¨å±€api



## 13.Vueå°è£…å¾—è¿‡åº¦ä¸åŠ¨ç”»

1.ä½œç”¨ï¼šåœ¨æ’å…¥ã€æ›´æ–°æˆ–è€…ç§»é™¤DOMå…ƒç´ æ—¶ï¼Œåœ¨åˆé€‚çš„æ—¶å€™ç»™å…ƒç´ æ·»åŠ æ ·å¼ç±»åã€‚

2.å›¾ç¤º

![image-20220811172536340](https://picgo-image-sen.oss-cn-zhangjiakou.aliyuncs.com/Typora/202208111725347.png)

3.ä½¿ç”¨åœºæ™¯ï¼š

Vue æä¾›äº† `transition` çš„å°è£…ç»„ä»¶ï¼Œåœ¨ä¸‹åˆ—æƒ…å½¢ä¸­ï¼Œå¯ä»¥ç»™ä»»ä½•å…ƒç´ å’Œç»„ä»¶æ·»åŠ è¿›å…¥/ç¦»å¼€è¿‡æ¸¡

- æ¡ä»¶æ¸²æŸ“ (ä½¿ç”¨ `v-if`)
- æ¡ä»¶å±•ç¤º (ä½¿ç”¨ `v-show`)
- åŠ¨æ€ç»„ä»¶
- ç»„ä»¶æ ¹èŠ‚ç‚¹

4.å†™æ³•

1ï¼‰å‡†å¤‡å¥½æ ·å¼ï¼š

- å…ƒç´ è¿›å…¥çš„æ ·å¼ï¼š
  1. v-enter :è¿›å…¥çš„èµ·ç‚¹
  2. v-enter-active :è¿›å…¥æ‰§è¡Œçš„è¿‡ç¨‹
  3. v-enter-to :è¿›å…¥çš„ç»ˆç‚¹

- å…ƒç´ ç¦»å¼€çš„æ ·å¼ï¼š
  1. v-leave :ç¦»å¼€çš„èµ·ç‚¹
  2. v-leave-active :ç¦»å¼€æ‰§è¡Œçš„è¿‡ç¨‹
  3. v-leave-to :ç¦»å¼€çš„ç»ˆç‚¹



2ï¼‰ä½¿ç”¨`<transition>`åŒ…è£¹è¦è¿‡åº¦çš„å…ƒç´ ï¼Œå¹¶ä¸”é…ç½®nameå±æ€§ï¼Œç¡®ä¿å”¯ä¸€æ€§

```
<transition-group name="firstBox" appear>
        <div v-show="!isBox" class="boxTwo" key="1">æˆ‘é™ˆå¹³å®‰æœ‰ä¸€ğŸ—¡</div>
        <div v-show="isBox" class="box" key="2">ä½ å¥½å‘€ï¼æé“¶æ²³(test3)</div>
</transition-group>
```



3ï¼‰å¤‡æ³¨ï¼šè‹¥æ˜¯å¤šä¸ªå…ƒç´ éœ€è¦è¿‡åº¦ï¼Œåˆ™éœ€è¦ä½¿ç”¨:`<transition-group>`,ä¸”æ¯ä¸€ä¸ªå…ƒç´ éƒ½è¦æŒ‡å®škeyå€¼



## 14.Vueçš„è¯·æ±‚ä»£ç† 

![image-20220814105942678](https://picgo-image-sen.oss-cn-zhangjiakou.aliyuncs.com/Typora/202208141059075.png)

### Vueè„šæ‰‹æ¶é…ç½®

#### æ–¹æ³•1ï¼š

åœ¨vue.config.jsæ·»åŠ å¦‚ä¸‹é…ç½®

```
devServer: {
    proxy: 'http://localhost:4000'
}
```

è¯´æ˜:

1. ä¼˜ç‚¹ï¼šé…ç½®ç®€å•ï¼Œè¯·æ±‚èµ„æºç›´æ¥å‘ç»™å‰ç«¯ï¼ˆ8080ï¼‰å³å¯
2. ç¼ºç‚¹ï¼šä¸èƒ½é…ç½®å¤šä¸ªä»£ç†ï¼Œä¸èƒ½çµæ´»çš„æ§åˆ¶è¯·æ±‚æ˜¯å¦èµ°ä»£ç†
3. å·¥ä½œæ–¹å¼ï¼šè‹¥æŒ‰ç…§ä¸Šè¿°é…ç½®ä»£ç†ï¼Œå½“è¯·æ±‚äº†å‰ç«¯ä¸å­˜åœ¨çš„èµ„æºæ—¶ï¼Œé‚£ä¹ˆè¯¥è¯·æ±‚ä¼šè½¬å‘ç»™æœåŠ¡å™¨ï¼ˆä¼˜å…ˆåŒ¹é…å‰ç«¯èµ„æºï¼‰

#### æ–¹æ³•2ï¼š

åœ¨vue.config.jsæ·»åŠ å¦‚ä¸‹é…ç½®

```
devServer: {
    proxy: {
      // é€šè¿‡ä»£ç†å‰ç¼€åŒºåˆ«ä»£ç†æœåŠ¡é…ç½®  /fiction
      '/fiction': {
      	//ç›®æ ‡è¯·æ±‚åœ°å€
        target: 'http://localhost:8001',
        ws: true,
        changeOrigin: true,
        // pathRewriteï¼ˆå¯¹è±¡/å‡½æ•°ï¼‰é‡å†™ç›®æ ‡çš„ url è·¯å¾„ï¼Œç¡®ä¿è¿”å›æ—¶è·¯å¾„ã€‚å¯¹è±¡é”®å°†ç”¨ä½œæ­£åˆ™è¡¨è¾¾å¼ä»¥åŒ¹é…è·¯å¾„ã€‚
        pathRewrite:{'^/fiction':''}
      },
      '/car': {
        target: 'http://localhost:8002',
        pathRewrite:{'^/car':''}
      }
    }
  }
  
  changeOrigin: é»˜è®¤å€¼ä¸ºtrueï¼ŒæœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚å¤´ä¸­çš„hostè·ŸæœåŠ¡å™¨ipåœ°å€ä¸€è‡´ï¼Œè‹¥ä¸ºfalseï¼Œåˆ™ä¼šæš´éœ²è¯·æ±‚æœåŠ¡çš„ip
  
```

è¯´æ˜ï¼š

1. ä¼˜ç‚¹ï¼šå¯ä»¥é…ç½®å¤šä¸ªä»£ç†ï¼Œä¸”å¯ä»¥çµæ´»çš„æ§åˆ¶è¯·æ±‚æ—¶å€™èµ°ä»£ç†
2. ç¼ºç‚¹ï¼šé…ç½®ç•¥å¾®ç¹çï¼Œè¯·æ±‚èµ„æºæ—¶å¿…é¡»åŠ å‰ç¼€



## 15.æ’æ§½

1.ä½œç”¨ï¼šè®©çˆ¶ç»„ä»¶å¯ä»¥å‘å­ç»„ä»¶æŒ‡å®šä½ç½®æ’å…¥htmlç»“æ„ï¼Œä¹Ÿæ˜¯ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äº <font color="red"> çˆ¶ç»„ä»¶ ===> å­ç»„ä»¶</font>

2.åˆ†ç±»ï¼šé»˜è®¤æ’æ§½ã€å…·åæ’æ§½ã€ä½œç”¨åŸŸæ’æ§½

3.ä½¿ç”¨æ–¹å¼ï¼š

> 1.é»˜è®¤æ’æ§½

```
çˆ¶ç»„ä»¶ä¸­ï¼š
<Category title="ç¾é£Ÿ">
<!-- 
å‘å­ç»„ä»¶çš„æ’æ§½ä¼ å…¥å†…å®¹
-->
	<div>
		<ul v-for="(item, index) in foods" :key="index">
			<li>{{ item }}</li>
		</ul>
	</div>
</Category>

å­ç»„ä»¶ä¸­ï¼š
<div>
	<slot>æ’æ§½é»˜è®¤å†…å®¹</slot>
</div>
```

> 2.å…·åæ’æ§½

```
çˆ¶ç»„ä»¶ä¸­ï¼š
<Category title="ç¾é£Ÿ">
<!-- 
å‘å­ç»„ä»¶çš„æ’æ§½ä¼ å…¥å†…å®¹
-->
	<template v-slot:æ’æ§½å>
        <div>
            <ul v-for="(item, index) in foods" :key="index">
                <li>{{ item }}</li>
            </ul>
        </div>
	</template>
</Category>

å­ç»„ä»¶ä¸­ï¼š
<div>
	<slot name="æ’æ§½å">æ’æ§½é»˜è®¤å†…å®¹</slot>
</div>
```

> 3.ä½œç”¨åŸŸæ’æ§½

ğŸ‡ğŸ‡ğŸ‡

ç†è§£ï¼š<font color="red">æ•°æ®åœ¨å­ç»„ä»¶æœ¬èº«ï¼Œä½†æ˜¯æ ¹æ®æ•°æ®ç”Ÿæˆçš„ç»“æ„éœ€è¦ç»„ä»¶çš„ä½¿ç”¨è€…æ¥å†³å®šã€‚</font>(foodsæ•°æ®åœ¨å­ç»„ä»¶ä¸­ï¼Œä½†æ˜¯æ•°æ®æ‰€éå†å‡ºæ¥çš„ç»“æ„æœ‰çˆ¶ç»„ä»¶å†³å®š)

```
çˆ¶ç»„ä»¶ä¸­
<Category title="ç¾é£Ÿ">
	<template slot-scope="value">
		<div>
			<ul v-for="(item, index) in value.foods" :key="index">
				<li>{{ item }}</li>
			</ul>
		</div>
	</template>
	<template v-slot:key1="{sex}">{{sex}}</template>
</Category>

å­ç»„ä»¶ä¸­
<div>
	<slot :foods="foods" :fictions="fictions" :nba="nba"></slot>
    <slot name="key1" sex="ç”·">æˆ‘æ˜¯é»˜è®¤æ’æ§½1</slot>
</div>
```

<font color="red">åœ¨Vue 2.6ç‰ˆæœ¬ä¸­templateæ¨¡æ¿ slotå±æ€§è¢«é—å¼ƒ</font> 

å»ºè®®é‡‡ç”¨   âœ¨âœ¨âœ¨ <font color="blue">æ¡ä»¶åœ¨templateæ ‡ç­¾ä¸­ä½¿ç”¨</font>

v-slot:default="æ’æ§½å"   ===> é»˜è®¤æ’æ§½å†™æ³•

v-slot:æ’æ§½å  æˆ–  #æ’æ§½å ===>  å…·åæ’æ§½å†™æ³•  

v-slot:æ’æ§½å=â€œ{data:slotData}â€   ===>  ä½œç”¨åŸŸè§£æ„æ’æ§½å†™æ³•ï¼ˆslotData: å­ç»„ä»¶æ’æ§½ä¼ å…¥çš„å€¼ï¼‰

v-slot:[dynamicSlotName]  ===>  åŠ¨æ€æ’æ§½å ï¼ˆdynamicSlotNameï¼šéœ€è¦åœ¨çˆ¶ç»„ä»¶ä¸­å®šä¹‰ï¼‰



## 16.vuex

### 1.vuexæ˜¯ä»€ä¹ˆï¼Ÿ

1.æ¦‚å¿µï¼šä¸“é—¨åœ¨Vueä¸­å®ç°é›†ä¸­å¼çŠ¶æ€ç®¡ç†ï¼ˆæ•°æ®ï¼‰ç®¡ç†çš„ä¸€ä¸ªVueæ’ä»¶ï¼Œå¯¹vueåº”ç”¨ä¸­å¤šä¸ªç»„ä»¶çš„å…±äº«çŠ¶æ€è¿›è¡Œé›†ä¸­å¼çš„ç®¡ç†ï¼ˆè¯»/å†™ï¼‰ï¼Œä¹Ÿæ˜¯ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„ä¸€ç§æ–¹å¼ï¼Œä¸”é€‚ç”¨äºä»»æ„ç»„ä»¶é—´é€šä¿¡ã€‚

2.Githubåœ°å€ï¼š[vuejs/vuex: ğŸ—ƒï¸ Centralized State Management for Vue.js. (github.com)](https://github.com/vuejs/vuex)



### 2.ä»€ä¹ˆæ—¶å€™ä½¿ç”¨vuex

1. å¤šä¸ªç»„ä»¶ä¾èµ–äºåŒä¸€ä¸ªçŠ¶æ€
2. ï¼›æ¥è‡ªäºä¸åŒç»„ä»¶çš„è¡Œä¸ºéœ€è¦å˜æ›´åŒä¸€çŠ¶æ€



### 3.åˆ†ææµç¨‹å›¾

![image-20220817230416562](https://picgo-image-sen.oss-cn-zhangjiakou.aliyuncs.com/Typora/202208172304297.png)



> å±æ€§åˆ†æ

1. æœ‰Actionsã€stateã€mutationsè¿™ä¸‰å¤§å±æ€§çš„å‰ææ˜¯ï¼Œå¿…é¡»åœ¨åˆ›å»ºå¥½çš„ storeå¯¹è±¡ï¼ˆå®ä¾‹åŒ–storeå¯¹è±¡ï¼‰ä¸­ä½¿ç”¨ã€‚
2. stateï¼šå¯¹è±¡ç±»å‹ï¼Œæ˜¯å­˜æ”¾å…±äº«å¯¹è±¡çš„åœ°æ–¹
3. actionsï¼šå¯¹è±¡ç±»å‹ï¼Œå½“éœ€è¦è¯·æ±‚å¤–ç½‘æ•°æ®æ—¶ï¼Œå¯ä»¥åœ¨æ­¤å¤„è°ƒç”¨ajaxè¯·æ±‚
4. mutationsï¼šå¯¹è±¡ç±»å‹ï¼Œæ“ä½œå…±äº«å¯¹è±¡çš„æ–¹æ³•ï¼Œæ¯ä¸ªæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ‹¿åˆ°stateã€‚ç¬¬äºŒå‚æ•°æ˜¯commit ä¼ å…¥çš„å‚æ•°
5. dispatchã€commitæ–¹æ³•ï¼šæ˜¯storeæä¾›çš„

> æ‰§è¡Œæ­¥éª¤

1. stateå­˜æ”¾çš„å…±äº«æ•°æ®è¢«renderæ–¹æ³•è‡ªåŠ¨æ›´æ–°åˆ°äº† vue componentsç»„ä»¶ä¸Šï¼Œå½“åœ¨ç»„ä»¶å¯¹å…±äº«æ•°æ®åšæ“ä½œï¼Œéœ€è¦ç”¨æ‰‹åŠ¨è°ƒç”¨dispatchæ–¹æ³•ï¼ˆdispatch('äº‹ä»¶å'ï¼Œå‚æ•°)ï¼‰ï¼Œactionså¯¹è±¡å±æ€§ä¸­å­˜åœ¨çš„äº‹ä»¶åæ–¹æ³•è¢«è°ƒç”¨ï¼Œåœ¨è¯¥äº‹ä»¶æ–¹æ³•æ‰§è¡Œå®Œçš„æœ€åä¸€æ­¥è°ƒç”¨commitï¼ˆcommitï¼ˆ'äº‹ä»¶å'ï¼Œå‚æ•°ï¼‰ï¼‰ï¼Œmutationså¯¹è±¡å±æ€§ä¸­å­˜åœ¨çš„äº‹ä»¶åæ–¹æ³•è¢«è°ƒç”¨ï¼Œè¯¥æ–¹æ³•ä¸€èˆ¬ç”¨ä½œäºå¯¹stateçš„å…±äº«æ•°æ®æ“ä½œï¼Œæ“ä½œå®Œåvuexè‡ªåŠ¨è°ƒç”¨mutateæ–¹æ³•å°†å…±äº«æ•°æ®æ›´æ–°ï¼Œstateè¢«æ›´æ–°çš„æ•°æ®æœ€ç»ˆä¹Ÿä¼šè¿›è¿‡renderæ–¹æ³•æ›´æ–°åœ¨vue componentsç»„ä»¶ä¸Šã€‚
2. stateå­˜æ”¾çš„å…±äº«æ•°æ®è¢«renderæ–¹æ³•è‡ªåŠ¨æ›´æ–°åˆ°äº† vue componentsç»„ä»¶ä¸Šï¼Œå½“åœ¨ç»„ä»¶å¯¹å…±äº«æ•°æ®åšæ“ä½œï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨commitï¼ˆcommitï¼ˆ'äº‹ä»¶å'ï¼Œå‚æ•°ï¼‰ï¼‰ï¼Œmutationså¯¹è±¡å±æ€§ä¸­å­˜åœ¨çš„äº‹ä»¶åæ–¹æ³•è¢«è°ƒç”¨ï¼Œè¯¥æ–¹æ³•ä¸€èˆ¬ç”¨ä½œäºå¯¹stateçš„å…±äº«æ•°æ®æ“ä½œï¼Œæ“ä½œå®Œåvuexè‡ªåŠ¨è°ƒç”¨mutateæ–¹æ³•å°†å…±äº«æ•°æ®æ›´æ–°ï¼Œstateè¢«æ›´æ–°çš„æ•°æ®æœ€ç»ˆä¹Ÿä¼šè¿›è¿‡renderæ–¹æ³•æ›´æ–°åœ¨vue componentsç»„ä»¶ä¸Šã€‚

ğŸ—¿ğŸ—¿ğŸ—¿ ä¸¤ä¸ªæ‰§è¡Œæ­¥éª¤åŒºåˆ«åœ¨äºï¼šæ˜¯å¦ç»è¿‡actionsçš„å¤„ç†ã€‚(å¦‚æœç»„ä»¶æ“ä½œæ˜ç¡®è‡ªå·±çš„ä¼ å€¼ï¼Œå°±å¯ä»¥ä¸è¦ç»è¿‡actionsçš„å¤„ç†)



### 4.æ­å»ºVuexçš„ç¯å¢ƒ

1.åˆ›å»ºæ–‡ä»¶ï¼š`src/store/index.js`

```
//å¼•ç”¨vue
import Vue from 'vue'
//å¼•ç”¨vuex
import Vuex from 'vuex'

//å‡†å¤‡ actions å¯¹è±¡â€”â€”å“åº”ç»„ä»¶ä¸­çš„ç”¨æˆ·çš„åŠ¨ä½œ
const actions = {}
//å‡†å¤‡ mutationså¯¹è±¡â€”â€”ä¿®æ”¹stateä¸­çš„æ•°æ®
const mutations = {}
//å‡†å¤‡ state å¯¹è±¡â€”â€”ä¿å­˜å…±äº«æ•°æ®
const state = {}

/*
    æ³¨å†ŒVuexæ’ä»¶æ”¾åœ¨ storeçš„åŸå› ï¼š
    åœ¨vueçš„è„šæ‰‹æ¶ä¸­ï¼Œåœ¨è§£æmain.jsæ–‡ä»¶æ—¶ï¼Œä¼šå°†æ‰€æœ‰çš„importå¯¼å…¥çš„ä»£ç å…¨éƒ¨æ•´ç†æ”¾åœ¨ä¸€èµ·ï¼Œ
    è¿™æ ·å°±ä¼šå¯¼è‡´storeä¸­çš„ä»£ç ä¼šå…ˆæ‰§è¡Œï¼Œvuexæ³¨å†Œæ’ä»¶åæ‰§è¡Œï¼Œæ‰€ä»¥æ‰ä¼šå¯¼è‡´æŠ¥é”™
*/
Vue.use(Vuex)

// åˆ›å»ºstoreå®ä¾‹
const store = new Vuex.Store({
	actions,
    mutations,
    state
})

//å¯¼å‡ºstore
export default store
```

2.åœ¨`main.js`ä¸­åˆ›å»ºvmä¼ å…¥storeé…ç½®é¡¹

```
//å¼•ç”¨store
import store from './store/index.js'
Â·Â·Â·Â·Â·Â·
new Vue({
  render: h => h(App),
  //é…ç½®store
  store,
  beforeCreate() {
    Vue.prototype.$bus = this
  }
}).$mount('#app')
```



### 5.vuexçš„åŸºæœ¬ä½¿ç”¨

1.åˆå§‹åŒ–æ•°æ®ï¼Œé…ç½®actionsã€mutationsã€stateï¼Œæ“ä½œstore.jsæ–‡ä»¶

```
//å¼•ç”¨vue
import Vue from 'vue'
//å¼•ç”¨vuex
import Vuex from 'vuex'

//å‡†å¤‡ actions å¯¹è±¡â€”â€”å“åº”ç»„ä»¶ä¸­çš„ç”¨æˆ·çš„åŠ¨ä½œ
const actions = {
	// context: ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥åœ¨æ­¤æ–¹æ³•è°ƒç”¨actionsä¸­å…¶ä»–æ–¹æ³•ï¼Œç”¨context.dispatch()
	jian(context,value){
        context.commit('Jian',value)
    }
}
//å‡†å¤‡ mutationså¯¹è±¡â€”â€”ä¿®æ”¹stateä¸­çš„æ•°æ®
const mutations = {
	Jian(state,value){
        state.sum -= value
    }
}
//å‡†å¤‡ state å¯¹è±¡â€”â€”ä¿å­˜å…±äº«æ•°æ®
const state = {
	sum: 0,
}

// åˆ›å»ºstoreå®ä¾‹
const store = new Vuex.Store({
	actions,
    mutations,
    state
})
```

2.ç»„ä»¶ä¸­è¯»å–Vuexçš„æ•°æ®: `$store.state.sum`

3.ç»„ä»¶ä¸­ä¿®æ”¹Vuexçš„æ•°æ®ï¼š`$store.dispatch('actionsçš„æ–¹æ³•å',æ•°æ®)` æˆ– `$store.commit('mutationsä¸­çš„æ–¹æ³•å',æ•°æ®)`

ğŸ§¨ğŸ§¨ğŸ§¨

å¤‡æ³¨ï¼šè‹¥æ²¡æœ‰ç½‘ç»œè¯·æ±‚æˆ–å…¶ä»–ä¸šåŠ¡é€»è¾‘ï¼Œç»„ä»¶ä¸­ä¹Ÿå¯ä»¥è¶Šè¿‡actionsï¼Œå³ä¸å†™`dispatch'`,ç›´æ¥ç¼–å†™`commit`



### 6.å››ä¸ªmapæ–¹æ³•çš„ä½¿ç”¨

ğŸ‰ğŸ‰ğŸ‰ åœ¨ä½¿ç”¨çš„å‰æéœ€è¦åœ¨ç»„ä»¶ä¸­å¼•ç”¨`import { mapState, mapGetters, mapMutations,mapActions} from "vuex";`

1.mapStateæ–¹æ³•ï¼šç”¨äºå¸®åŠ©æˆ‘ä»¬æ˜ å°„`state`ä¸­çš„æ•°æ®ä¸ºè®¡ç®—å±æ€§ï¼Œå¯¹äº`this.$store.state`çš„ç®€å†™

```
computed:{
	// ç”¨äºå¸®åŠ©æˆ‘ä»¬æ˜ å°„state ä¸­çš„æ•°æ®ä¸ºè®¡ç®—å±æ€§ï¼ˆå¯¹è±¡å†™æ³•ï¼‰
    ...mapState({ name: "name", fiction: "fiction" }),
    
    // ç”¨äºå¸®åŠ©æˆ‘ä»¬æ˜ å°„getters ä¸­çš„æ•°æ®ä¸ºè®¡ç®—å±æ€§ï¼ˆå¯¹è±¡å†™æ³•ï¼‰
    // ...mapGetters({ bigSum: "bigSum" }),
}
```

2.mapGettersæ–¹æ³•ï¼šç”¨äºå¸®åŠ©æˆ‘ä»¬æ˜ å°„`getter`ä¸­çš„æ•°æ®ä¸ºè®¡ç®—å±æ€§,å¯¹äº`this.$store.getters`çš„ç®€å†™

```
computed:{
	// ç”¨äºå¸®åŠ©æˆ‘ä»¬æ˜ å°„getters ä¸­çš„æ•°æ®ä¸ºè®¡ç®—å±æ€§ï¼ˆå¯¹è±¡å†™æ³•ï¼‰
    // ...mapGetters({ bigSum: "bigSum" }),
    
    // ç”¨äºå¸®åŠ©æˆ‘ä»¬æ˜ å°„getters ä¸­çš„æ•°æ®ä¸ºè®¡ç®—å±æ€§ï¼ˆæ•°ç»„å†™æ³•ï¼‰
    ...mapGetters(["bigSum"]),
}
```

3.mapMutationsæ–¹æ³•ï¼šç”¨äºå¸®åŠ©æˆ‘ä»¬ç”Ÿæˆä¸`mutations`å¯¹è¯çš„æ–¹æ³•ï¼Œå³:åŒ…å«`$store.commit(xxx)`çš„å‡½æ•°

```
methods:{
	//å¯¹è±¡å†™æ³• keyï¼šè°ƒç”¨æ–¹æ³•åï¼Œvalueï¼šmutationsä¸­å¯¹åº”çš„æ–¹æ³•åï¼Œ ğŸ†ğŸ†ğŸ† ä¸è¿‡æ­¤å¤„æ˜¯ä¼ ä¸äº†å‚æ•°çš„ï¼Œmutationsä¸­å¯¹åº”æ–¹æ³•æ¥æ”¶çš„æ˜¯eventå‚æ•°ï¼Œæ‰€ä»¥æƒ³ä¼ å€¼å¯ä»¥åœ¨è°ƒç”¨çš„æ—¶å€™ä¼ 
    ...mapMutations({increment:'Jia',decrement:'Jian'}),
    //æ•°ç»„å†™æ³•ï¼Œé‚£ä¹ˆè°ƒç”¨çš„æ–¹æ³•åè¦ä¸mutationså¯¹åº”çš„æ–¹æ³•åä¸€è‡´
    // ...mapMutations(['Jia','Jian']),
}
```

4.mapActionsæ–¹æ³•ï¼šç”¨äºå¸®åŠ©æˆ‘ä»¬ç”Ÿæˆä¸`actions`å¯¹è¯çš„æ–¹æ³•ï¼Œå³:åŒ…å«`$store.dispatch(xxx)`çš„å‡½æ•°

```
methods:{
    //å¯¹è±¡å†™æ³• keyï¼šè°ƒç”¨æ–¹æ³•åï¼Œvalueï¼šmutationsä¸­å¯¹åº”çš„æ–¹æ³•åï¼Œ
    ...mapActions({incrementOdd:'jiaOdd',incrementWait:'jiaWait'})
     //æ•°ç»„å†™æ³•ï¼Œé‚£ä¹ˆè°ƒç”¨çš„æ–¹æ³•åè¦ä¸mutationså¯¹åº”çš„æ–¹æ³•åä¸€è‡´
    // ...mapActions(["jiaOdd","jiaWait"])
}
```



### 7.Vuexæ¨¡å—åŒ– + å‘½åç©ºé—´

1.ç›®çš„ï¼šè®©ä»£ç æ›´å¥½ç»´æŠ¤ï¼Œè®©å¤šç§æ•°æ®åˆ†ç±»æ›´åŠ æ˜ç¡®

2.ä¿®æ”¹`store.js`

```
const countAbout = {
 nameSpaced:true, //å¼€å¯å‘½åç©ºé—´
 mutations:{...},
 state:{...},
 getters:{...},
 actions:{...}
}

//åœ¨vuexä¸­æ¨¡å—åŒ–å¼•ç”¨ modulesä¸­çš„keyå€¼æ˜¯æ¨¡å—åï¼Œvalueæ˜¯æ¨¡å—çš„å†…å®¹
export default new Vuex.Store({
	modules:{
		count : countAbout
	}
})
```

3.å¼€å¯å‘½åç©ºé—´ï¼Œç»„ä»¶ä¸­è¯»å–stateæ•°æ®

```
//æ–¹å¼ä¸€ï¼šå€ŸåŠ©mapStateè¯»å–
...mapState('counts',['name','fiction','sum']),
...mapState('persons',{personList:'personList'}),
//æ–¹å¼äºŒï¼šè‡ªå·±ç›´æ¥è¯»å–
this.$store.state.persons.personList
```

4.å¼€å¯å‘½åç©ºé—´ï¼Œç»„ä»¶ä¸­è¯»å–gettersæ•°æ®ï¼š

```
//æ–¹å¼ä¸€ï¼šå€ŸåŠ©mapGettersè¯»å–
...mapGetters('counts',["bigSum"]),
...mapGetters('counts',{bigSum:"bigSum"}),
//æ–¹å¼äºŒï¼šè‡ªå·±ç›´æ¥è¯»å–
this.$store.getters['persons/firstPersonName'].name
```

5.å¼€å¯å‘½åç©ºé—´ï¼Œç»„ä»¶ä¸­è°ƒç”¨dispatchè·Ÿactionsè”ç³»

```
//æ–¹å¼ä¸€ï¼šå€ŸåŠ©mapActions
...mapActions('counts',{incrementOdd:'jiaOdd',incrementWait:'jiaWait'})
...mapActions('counts',['jiaOdd','jiaWait'])
//æ–¹å¼äºŒï¼šè‡ªå·±è°ƒç”¨  dispatch(ä¼ å…¥è·¯å¾„) è·¯å¾„ä»¥æ¨¡å—åå¼€å¤´ï¼Œåœ¨æ¨¡å—ä¸­æ‰¾åˆ°actionsé‡Œè”ç³»çš„æ–¹æ³•
this.$store.dispatch('persons/addPersonServer')
```

6.å¼€å¯å‘½åç©ºé—´ï¼Œç»„ä»¶ä¸­è°ƒç”¨commitè·Ÿmutationsè”ç³»

```
//æ–¹å¼ä¸€ï¼šå€ŸåŠ©mapMutations
...mapMutations('counts',{increment:'Jia',decrement:'Jian'}),
...mapMutations('counts',['Jia','Jian'])
//æ–¹å¼äºŒï¼šè‡ªå·±è°ƒç”¨ 
this.$store.commit('persons/ADD_PERSON',personObj)
```

## 17.vue- routerè·¯ç”±

### 1.vue-routerçš„ç†è§£

â€‹	vueçš„ä¸€ä¸ªæ’ä»¶åº“ï¼Œä¸“é—¨æ¥å®ç°SPAåº”ç”¨

### 2.å¯¹äºSPAåº”ç”¨çš„ç†è§£

1. å•é¡µWebåº”ç”¨ï¼ˆsingle page web application ï¼ŒSPAï¼‰ã€‚
2. æ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªå®Œæ•´çš„é¡µé¢
3. ç‚¹å‡»é¡µé¢çš„å¯¼èˆªé“¾æ¥<font color="red">ä¸ä¼šåˆ·æ–°</font>é¡µé¢ï¼Œåªä¼šåšé¡µé¢çš„<font color=red>å±€éƒ¨æ›´æ–°</font>ã€‚
4. æ•°æ®éœ€è¦é€šè¿‡ajaxè¯·æ±‚è·å–

### 3.è·¯ç”±çš„ç†è§£

#### 1.ä»€ä¹ˆæ˜¯è·¯ç”±ï¼Ÿ

1. ä¸€ä¸ªè·¯ç”±å°±æ˜¯ä¸€ç»„æ˜ å°„å…³ç³»ï¼ˆkey-valueï¼‰
2. key ä¸ºè·¯å¾„ï¼Œvalueå¯èƒ½function æˆ– component

#### 2.è·¯ç”±åˆ†ç±»

1. åç«¯è·¯ç”±ï¼š

   1ï¼‰ç†è§£ï¼švalueæ˜¯functionï¼Œç”¨äºå¤„ç†å®¢æˆ·ç«¯æäº¤çš„æäº¤ã€‚

   2ï¼‰å·¥ä½œè¿‡ç¨‹ï¼šæœåŠ¡å™¨æ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ï¼Œæ ¹å‰§**è¯·æ±‚è·¯å¾„**æ‰¾åˆ°åŒ¹é…çš„å‡½æ•°æ¥å¤„ç†è¯·æ±‚ï¼Œè¿”å›å“åº”æ•°æ®ã€‚

2. å‰ç«¯è·¯ç”±ï¼š

   1ï¼‰ç†è§£ï¼švalueæ˜¯componentï¼Œç”¨äºå±•ç¤ºé¡µé¢å†…å®¹ã€‚

   2ï¼‰å·¥ä½œè¿‡ç¨‹ï¼šå½“æµè§ˆå™¨çš„è·¯å¾„æ”¹å˜æ—¶ï¼Œ**å¯¹åº”çš„ç»„ä»¶å°±ä¼šæ˜¾ç¤º**
   
   

### 4.åŸºæœ¬ä½¿ç”¨

1. å®‰è£…vue-routerï¼Œå‘½ä»¤npm i vue-router@ç‰ˆæœ¬å· vueRouter 3ç‰ˆæœ¬å¯¹åº” vue2 ï¼ŒvueRouter 4ç‰ˆæœ¬å¯¹åº” vue3
2. å¼•ç”¨æ’ä»¶ï¼š `import VueRouter from 'vue-router'`
3. åº”ç”¨æ’ä»¶ï¼š`Vue.use(VueRouter)`
4. ç¼–è¾‘`router.js`æ–‡ä»¶

```javascript
// å¼•ç”¨VueRouter
import VueRouter from 'vue-router';
// å¼•ç”¨è·¯ç”±å±•ç¤ºç»„ä»¶
import About from '../components/About'
import Home from '../components/Home'
//åˆ›å»ºrouterå®ä¾‹å¯¹è±¡ï¼Œå»ç®¡ç†ä¸€ç»„ä¸€ç»„çš„è·¯ç”±è§„åˆ™
const router = new VueRouter({
 Â   routes :[
 Â  Â  Â   {
 Â  Â  Â  Â  Â   path: '/about',
 Â  Â  Â  Â  Â   component: About
 Â  Â  Â   },
 Â  Â  Â   {
 Â  Â  Â  Â  Â   path: '/Home',
 Â  Â  Â  Â  Â   component: Home
 Â  Â  Â   }
 Â   ]
})

// å¯¼å‡ºrouter
export default router
```

5. å®ç°åˆ‡æ¢(active-classå¯ä»¥é…ç½®é«˜äº®æ ·å¼)

   ```
   <router-link active-class="active" to="/about">About</router-link>
   ```

   <router-link>æ ‡ç­¾æœ€åè¢«vueè§£ææˆ<a>æ ‡ç­¾,æ‰€ä»¥éœ€è¦ä¿®æ”¹æ ·å¼çš„è¯ï¼Œæœ€ååº”è¯¥æ˜¯æŒ‡å‘<a>æ ‡ç­¾

   ```css
   .nav > a {
     color: #fff;
     //å»æ‰ä¸‹åˆ’çº¿
     text-decoration: none;
   }
   ```

6. æŒ‡å®šå±•ç¤ºä½ç½®

   ```
   <router-view></router-view>
   ```

âœ¨âœ¨âœ¨

å¤‡æ³¨ï¼š

1.è·¯ç”±ç»„ä»¶å’Œé¡µé¢ç»„ä»¶åˆ†å¼€å­˜æ”¾ï¼Œé¡µé¢ç»„ä»¶å­˜æ”¾åœ¨`component`æ–‡ä»¶å¤¹ä¸­ï¼Œè·¯ç”±ç»„ä»¶å­˜æ”¾åœ¨`pages`æ–‡ä»¶å¤¹ä¸­

2.æ¯ä¸ªè·¯ç”±ç»„ä»¶ä¸­çš„`vc(vueComponent)`å®ä¾‹ä¸Šéƒ½æ˜¯å­˜åœ¨`$route`å’Œ`$router`,æ¯ä¸ªç»„ä»¶ä¸­`$router`æ˜¯ä¸ä¸€æ ·çš„ï¼Œå­˜æ”¾çš„éƒ½æ˜¯è‡ªå·±çš„ä¿¡æ¯ï¼Œä½†æ˜¯<font color=red>æ¯ä¸ªç»„ä»¶ä¸­$routeræ˜¯vueä¸­å”¯ä¸€çš„routerï¼ˆ</font>è·¯ç”±å™¨ï¼‰

3.å½“åˆ‡æ¢è·¯ç”±ç»„ä»¶æ—¶ï¼Œä¼šå°†éšè—çš„è·¯ç”±ç»„ä»¶è¿›è¡Œé”€æ¯ï¼Œæ˜¾ç¤ºçš„è·¯ç”±ç»„ä»¶ä¼šè¢«é‡æ–°æ¸²æŸ“ï¼



### 5.å¤šçº§è·¯ç”±ï¼ˆåµŒå¥—è·¯ç”±ï¼‰

1.é…ç½®è·¯ç”±è§„åˆ™ï¼Œä½¿ç”¨childrené…ç½®é¡¹

```js
routes :[
        {
            path: '/about',
            component: About
        },
        {
            path: '/home',
            component: Home,
            children:[
                {
                    path:'news',
                    component:News
                },
                {
                    path:'message',
                    component:Message
                }
            ]
        }
    ]
```

2.è·³è½¬ï¼ˆè¦å†™å®Œæ•´è·¯å¾„ï¼‰

```html
<router-link  active-class="active" to="/home/news">News</router-link>
```

### 6.è·¯ç”±çš„queryå‚æ•°

1.åœ¨çˆ¶è·¯ç”±ç»„ä»¶ä¼ å‚çš„æ–¹æ³•

```vue
<!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°  toçš„å­—ç¬¦ä¸²å†™æ³•ï¼ˆå›ºæ€ä¼ å‚ï¼‰-->
<router-link  to="/home/message/details?id=666&title=ä½ å¥½">{{m.msg}}</router-link>

<!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°  toçš„å­—ç¬¦ä¸²å†™æ³•ï¼ˆåŠ¨æ€ä¼ å‚ï¼‰-->
<router-link  :to="`/home/message/details?id=${m.id}&title=${m.msg}`">{{m.msg}}</router-link>

<!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼Œtoçš„å¯¹è±¡å†™æ³• -->
<router-link  :to="{
    path :'/home/message/details',
    query:{
        id:m.id,
        title:m.msg
    }
}">{{m.msg}}</router-link> 
```

2.åœ¨å­è·¯ç”±ç»„ä»¶æ¥æ”¶çš„æ–¹æ³•

```js
$route.query.id
$route.query.title
```



### 7.å‘½åè·¯ç”±

1.ä½œç”¨ï¼šå¯ä»¥ç®€åŒ–è·¯ç”±çš„è·³è½¬ã€‚

2.å¦‚ä½•ä½¿ç”¨

â€‹	1.ç»™è·¯ç”±å‘½å

```js
{
    path: '/home',
    component: Home,
    children:[
        {
            path:'news',
            component:News
        },
        {
            path:'message',
            component:Message,
            children:[
                {
                    name:'key1', //ç»™è·¯ç”±å‘½å
                    path:'details',
                    component:Details
                }
            ]
        }
    ]
}
```

â€‹	2.ç®€åŒ–è·³è½¬

```vue
<!-- ç®€åŒ–å‰ï¼Œéœ€è¦å†™å®Œæ•´çš„è·¯å¾„ -->
<router-link  :to="`/home/message/details?id=${m.id}&title=${m.msg}`">{{m.msg}}</router-link>
<!-- ç®€åŒ–åï¼Œç›´æ¥é€šè¿‡åå­—è·³è½¬ -->
<router-link :to="{name:'key1'}"></router-link>
<!-- ç®€åŒ–å†™æ³•é…åˆä¼ é€’å‚æ•° -->
<router-link
    :to="{
        name: 'key1',
        query: {
        id: m.id,
        title: m.msg,
    },
}">{{ m.msg }}
</router-link>
```



### 8.è·¯ç”±çš„paramså‚æ•°

1.é…ç½®è·¯ç”±ï¼Œå£°æ˜æ¥æ”¶paramså‚æ•°

```js
{
    path: '/home',
    component: Home,
    children:[
        {
            path:'news',
            component:News
        },
        {
            path:'message',
            component:Message,
            children:[
                {
                    name:'key1',
                    path:'details/:id/:title',//ä½¿ç”¨å ä½ç¬¦å£°æ˜æ¥æ”¶paramså‚æ•°
                    component:Details
                }
            ]
        }
    ]
}
```

2.ä¼ é€’å‚æ•°

```vue
 <!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼Œtoçš„å­—ç¬¦ä¸²å†™æ³•ï¼ˆå›ºå®šä¼ å€¼ï¼‰ -->
 <!-- <router-link to="/home/message/details/666/ä½ å¥½">{{m.msg}}</router-link> -->
 <!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼Œtoçš„å¯¹è±¡å†™æ³• -->
 <router-link
     :to="{
     name: 'key1',
     params: {
     id: m.id,
     title: m.msg,
     },
 }">{{ m.msg }}
 </router-link>
```

âœ¨âœ¨âœ¨

<font color=red>æ³¨æ„</font>:è·¯ç”±æºå¸¦paramså‚æ•°æ—¶ï¼Œè‹¥ä½¿ç”¨toçš„å¯¹è±¡å†™æ³•ï¼Œåˆ™ä¸èƒ½ä½¿ç”¨oathé…ç½®é¡¹ï¼Œå¿…é¡»ä½¿ç”¨nameé…ç½®å±æ€§



### 9.è·¯ç”±çš„propsé…ç½®

ä½œç”¨ï¼šè®©è·¯ç”±ç»„ä»¶æ›´æ–¹ä¾¿çš„æ”¶åˆ°å‚æ•°

åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ `$route` ä¼šä½¿ä¹‹ä¸å…¶å¯¹åº”è·¯ç”±å½¢æˆé«˜åº¦è€¦åˆï¼Œä»è€Œä½¿ç»„ä»¶åªèƒ½åœ¨æŸäº›ç‰¹å®šçš„ URL ä¸Šä½¿ç”¨ï¼Œé™åˆ¶äº†å…¶çµæ´»æ€§ã€‚

ä½¿ç”¨ `props` å°†ç»„ä»¶å’Œè·¯ç”±è§£è€¦

![image-20220824231625544](https://picgo-image-sen.oss-cn-zhangjiakou.aliyuncs.com/Typora/202208242316771.png)

åœ¨router.jsæ–‡ä»¶ä¸­é…ç½®

```js
{
    path:'message',
    component:Message,
    children:[
        {
        name:'key1',
        // path:'details/:id/:title',//ä½¿ç”¨å ä½ç¬¦å£°æ˜æ¥æ”¶paramså‚æ•°  ç¬¬ä¸€ä¸ªç§å†™æ³•éœ€è¦å¸¦çš„
        path:'details',//ç¬¬äºŒç§å†™æ³•å’Œç¬¬ä¸‰ç§å†™æ³•éœ€è¦å¸¦çš„
        component:Details,
        // ç¬¬ä¸€ä¸ªç§å†™æ³•,å¯¹è±¡å†™æ³•.è¯¥å¯¹è±¡ä¸­æ‰€æœ‰çš„key-valueçš„ç»„åˆæœ€ç»ˆéƒ½ä¼šé€šè¿‡propsä¼ ç»™Detailsç»„ä»¶
        props:{id:666,title:'ä½ å¥½'}

        // ç¬¬äºŒç§å†™æ³•,å¸ƒå°”å€¼,å½“å€¼ä¸ºtrueæ—¶,æŠŠè·¯ç”±æ¥æ”¶åˆ°çš„æ‰€æœ‰paramså‚æ•°é€šè¿‡propsä¼ ç»™detailsç»„ä»¶
        props:true,     
        //å¸ƒå°”å€¼åªèƒ½æ­é… paramsä½¿ç”¨å¹¶ä¸”éœ€è¦åœ¨pathè·¯å¾„ä¸­éœ€è¦å†™å¥½å ä½ç¬¦

        // ç¬¬ä¸‰ç§å†™æ³•,å‡½æ•°å¼,è¯¥å‡½æ•°è¿”å›çš„å¯¹è±¡ä¸­æ¯ä¸€è¶³key-valueéƒ½ä¼šé€šè¿‡propsä¼ ç»™detailsç»„ä»¶
        // å‡½æ•°å¼ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ this.$route è¯¥ä¼ å€¼ç»„ä»¶çš„ 
        // å‡½æ•°å¼åªèƒ½æ­é…queryä¼ å‚ä½¿ç”¨  æ³¨æ„ä¼ å€¼ä¹Ÿå¾—æ˜¯queryå±æ€§
        props($route){
                return {
                    id: $route.query.id,
                    title: $route.query.title
                }
            }
        }
    ]
}
```

åœ¨ç»„ä»¶ä¸­å‘é€

```
//ç¬¬äºŒç§å¸ƒå°”å€¼ä¼ å€¼
<router-link
:to="{
name: 'key1',
params: {
    id: m.id,
    title: m.msg,
    },
}"
>{{ m.msg }}
</router-link>
//ç¬¬ä¸‰ç§å‡½æ•°å¼ä¼ å€¼
<router-link
:to="{
name: 'key1',
query: {
    id: m.id,
    title: m.msg,
    },
}"
>{{ m.msg }}
</router-link>
```

åœ¨ç»„ä»¶ä¸­æ¥æ”¶

```
props:['id','title']
```



### 10. `<router-link>`çš„replaceå±æ€§

1.ä½œç”¨ï¼šæ§åˆ¶è·¯ç”±è·³è½¬æ—¶æ“ä½œæµè§ˆå™¨å†å²è®°å½•çš„æ¨¡å¼

2.æµè§ˆå™¨çš„å†å²è®°å½•æœ‰æ§åˆ¶å†™å…¥æ–¹å¼ï¼šåˆ†åˆ«ä¸º`push`å’Œ`replace`ï¼Œ`push`æ˜¯è¿½åŠ å†å²è®°å½•ï¼Œ`replace`æ˜¯æ›¿æ¢å½“å‰è®°å½•ã€‚è·¯ç”±è·³è½¬æ—¶å€™é»˜è®¤ä¸º`push`

3.å¦‚ä½•å¼€å¯`replace`æ¨¡å¼ï¼š

```vue
//ä¸¤ç§å†™æ³•
<router-link :replace="true" active-class="active" to="/home/news" >News</router-link>
<router-link replace active-class="active" to="/home/message">Message</router-link>
```



### 11.ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª

1.ä½œç”¨ï¼šä¸å€ŸåŠ©`<router-link>`å®ç°è·¯ç”±è·³è½¬ï¼Œè®©è·¯ç”±è·³è½¬æ›´åŠ çµæ´»

2.å…·ä½“ç¼–ç 

```js
//push Api å®ç°è·³è½¬
this.$router.push({
    name: "key2",
    query: {
        id: data.id,
        title: data.title,
    },
});

//replace Api å®ç°æ›¿æ¢
this.$router.replace({
    name: "key2",
    query: {
        id: data.id,
        title: data.title,
    },
});

//æ“ä½œæµè§ˆå™¨çš„å†å²è®°å½•
this.$router.back() //åé€€
this.$router.forward() //å‰è¿›
this.$router.go()//å‚æ•°æ˜¯numberå€¼ï¼Œæ­£æ•°ä¸ºå‰è¿›å‡ æ­¥ï¼Œè´Ÿæ•°ä¸ºé€€åå‡ æ­¥

åŒæ ·å±•ç¤ºåŠŸèƒ½è¿˜æ˜¯å¾—è¦ä¾èµ–äº<router-view>æ ‡ç­¾
```



### 12.ç¼“å­˜è·¯ç”±ç»„ä»¶

1.ä½œç”¨ï¼šè®©ä¸å±•ç¤ºå¾—è·¯ç”±ç»„ä»¶ä¿æŒæŒ‚è½½ï¼Œä¸è¢«é”€æ¯ã€‚

2.å…·ä½“ç¼–ç 

```vue
<keep-alive include="News">
  <router-view></router-view>
</keep-alive>
```

include å±æ€§ï¼šæŒ‡å®šæŸä¸ªç»„ä»¶ä¿æŒæŒ‚è½½ï¼Œ<font color=red>è¿™é‡Œçš„å€¼æ˜¯ç»„ä»¶åç§°ï¼Œä¸æ˜¯è·¯ç”±åç§°</font>



### 13.è·¯ç”±ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ

1.ä½œç”¨ï¼šè·¯ç”±ç»„ä»¶æ‰€ç‹¬æœ‰çš„ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œç”¨äºæ•è·è·¯ç”±ç»„ä»¶çš„æ¿€æ´»çŠ¶æ€ã€‚

2.å…·ä½“åå­—ï¼š

1. `activated`è·¯ç”±ç»„ä»¶è¢«æ¿€æ´»æ—¶è§¦å‘
2. `deactivated`è·¯ç”±ç»„ä»¶å¤±æ´»æ—¶è§¦å‘

```vue
ä¸è¿‡éœ€è¦æ­é…<keep-alive>
<keep-alive :include=['new','message']>
	<router-view></router-view>
</keep-alive>

activated() {
// è·¯ç”±ç»„ä»¶è¢«æ¿€æ´»æ—¶è§¦å‘
	this.timer = setInterval(()=>{
        console.log('è·¯ç”±ç»„ä»¶è¢«æ¿€æ´»æ—¶è§¦å‘')
        this.opacity -= 0.01;
        if(this.opacity <= 0) this.opacity = 1
	},100)
},
deactivated() {
    // è·¯ç”±å¤±æ´»çš„æ—¶å€™è§¦å‘
    clearInterval(this.timer)
},
```

